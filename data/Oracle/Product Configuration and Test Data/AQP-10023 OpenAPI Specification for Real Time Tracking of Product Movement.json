{
  "openapi": "3.0.2",
  "info": {
    "title": "TDMS RealtimeProcess  API",
    "version": "3.0"
  },
  "components": {
    "schemas": {
      "material": {
        "required": [
          "material"
        ],
        "properties": {
          "material": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "serialnumber": {
                  "type": "string",
                  "example": "01234M123"
                },
                "partnumber": {
                  "type": "string",
                  "example": "128765-124"
                },
                "vendorpartnumber": {
                  "type": "string",
                  "example": 12121,
                  "description": "Contains the details of the actual partnumber from the device."
                },
                "partnerpartnumber": {
                  "type": "string",
                  "example": 12121212,
                  "description": "the partnumber used by the person building the product. This may differ from the 'partnumber' and 'vendorpartnumber' however this is optional."
                },
                "description": {
                  "type": "string",
                  "example": "Memory Module",
                  "description": "the description of the part"
                },
                "deleted": {
                  "type": "boolean",
                  "example": false,
                  "default": false,
                  "description": "Indicate if the item was a deleted part. ie removed from the BOM. By default all parts are added."
                },
                "material": {
                  "type": "array",
                  "description": "Used to define a hierachy of parts. This will point to an array of material.",
                  "items": {
                    "$ref": "#/components/schemas/material"
                  },
                  "example": "Array of material objects"
                }
              }
            }
          }
        }
      },
      "unit": {
        "type": "object",
        "required": [
          "serialnumber",
          "partnumber",
          "family"
        ],
        "properties": {
          "serialnumber": {
            "type": "string"
          },
          "partnumber": {
            "type": "string"
          },
          "family": {
            "type": "string"
          }
        }
      }
    },
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "description": "API key is used to authorize any requests",
        "name": "x-tdms-apikey",
        "in": "header"
      }
    }
  },
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "paths": {
    "/location/{location}/{serialnumber}": {
      "post": {
        "summary": "Update a unit which is already at a location",
        "operationId": "updateUnitAtLocation",
        "responses": {
          "200": {
            "description": "OK"
          }
        },
        "tags": [
          "unit"
        ],
        "requestBody": {
          "description": "The material BOM",
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/material"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "action",
            "in": "query",
            "description": "The action being carried out. by default it would be an update.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "update",
                "delete"
              ],
              "default": "update",
              "description": "the action you are carrying ouot."
            }
          },
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "The unique siteid that is required to indicate where exactly this location is located. ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "location",
            "in": "path",
            "description": "The location on the shop floor , within a site where the system is being placed to under go a test operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "the serialnumber of the system being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "operation",
            "in": "query",
            "description": "the operation that we expect to be carried out at this location such as IST , SFT , ASSEMBLY etc",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^[A-Z0-9a-z-_]*",
              "minLength": 3
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "The status of completing an operation. If an operation was executed , what was the status",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "success",
                "failure"
              ],
              "default": "success"
            }
          },
          {
            "name": "partnumber",
            "in": "query",
            "description": "the part number of the item being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family",
            "in": "query",
            "description": "The family of product being placed into the location",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^[A-Z0-9a-z-_]*",
              "minLength": 3
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ]
      },
      "delete": {
        "summary": "Take a unit out of a location",
        "operationId": "removeUnitFromLocation",
        "tags": [
          "unit"
        ],
        "parameters": [
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "The unique siteid that is required to indicate where exactly this location is located. ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "location",
            "in": "path",
            "description": "The location on the shop floor , within a site where the system is being placed to under go a test operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "the serialnumber of the system being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "operation",
            "in": "query",
            "description": "the operation that we expect to be carried out at this location such as IST , SFT , ASSEMBLY etc",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "The status of completing an operation. If an operation was executed , what was the status",
            "required": false,
            "schema": {
              "type": "string",
              "enum": [
                "success",
                "failure"
              ]
            }
          },
          {
            "name": "partnumber",
            "in": "query",
            "description": "the part number of the item being placed into the location",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^[A-Z0-9a-z-_]*"
            }
          },
          {
            "name": "family",
            "in": "query",
            "description": "The family of product being placed into the location",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^[A-Z0-9a-z-_]*"
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "put": {
        "summary": "Put a unit into a  location to have an operation executed upon it",
        "operationId": "putUnitIntoLocation",
        "tags": [
          "unit"
        ],
        "requestBody": {
          "description": "The material BOM",
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/material"
              }
            }
          }
        },
        "parameters": [
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "The unique siteid that is required . ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "location",
            "in": "path",
            "description": "The location on the shop floor where the system is being placed to under go a test operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "the serialnumber of the item",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "partnumber",
            "in": "query",
            "description": "the part number of the items being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family",
            "in": "query",
            "description": "The family of product being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/unit/{serialnumber}": {
      "delete": {
        "description": "Remove a unit ffrom the process as it has been completed and shipped",
        "tags": [
          "unitcompleted"
        ],
        "parameters": [
          {
            "name": "x-tdms-sited",
            "in": "header",
            "description": "The unique siteid that is required . ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "The location on the shop floor where the system is being placed to under go a test operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "description": "Unit has been created witin the shop floor ie serialnumber has been created",
        "tags": [
          "unitcreation"
        ],
        "parameters": [
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "the unique siteid that is hosting the device",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "serialnumber of the unit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "purchaseorderNumber",
            "in": "query",
            "description": "The purchaseorder to whcih this serialnumber relates",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "purchaseorderNumberReceiveDate",
            "in": "query",
            "description": "When the purchase order was received",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "salesorderNumber",
            "in": "query",
            "description": "When the purchase order was received",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "salesorderNumberReceiveDate",
            "in": "query",
            "description": "When the sales order was received",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "parentSerialnumber",
            "in": "query",
            "description": "If this serialnumber belongs to a parent system, such as a rack, then this would be populated.",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/rack/{serialnumber}": {
      "delete": {
        "description": "Remove a rack from the process as it has been completed and shipped",
        "tags": [
          "unitcompleted"
        ],
        "parameters": [
          {
            "name": "x-tdms-sited",
            "in": "header",
            "description": "The unique siteid that is required . ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "The location on the shop floor where the system is being placed to under go a test operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "description": "Rack unit has been created witin the shop floor ie serialnumber has been created",
        "tags": [
          "unitcreation"
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/unit"
                }
              }
            }
          },
          "description": "Details of the units which belong within the rack"
        },
        "parameters": [
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "the unique siteid that is hosting the device",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "serialnumber of the unit",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "purchaseorderNumber",
            "in": "query",
            "description": "The purchaseorder to whcih this serialnumber relates",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "purchaseorderNumberReceiveDate",
            "in": "query",
            "description": "When the purchase order was received",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "salesorderNumber",
            "in": "query",
            "description": "When the purchase order was received",
            "required": false,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "salesorderNumberReceiveDate",
            "in": "query",
            "description": "When the sales order was received",
            "required": false,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/testsuite/{location}/{operation}/{serialnumber}": {
      "delete": {
        "description": "Remove a unit from a test suite as it has completed the test suite",
        "tags": [
          "testsuite"
        ],
        "parameters": [
          {
            "name": "x-tdms-sited",
            "in": "header",
            "description": "The unique siteid that is required . ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "location",
            "in": "path",
            "description": "The location on the shop floor where the system is being placed to under go a test operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "guti",
            "in": "query",
            "description": "The global unique identifier which refers to the test being run. When tdms receives this full result file, this will correlate back to the real time event. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "testStartTime",
            "in": "query",
            "description": "Test start time which will correspond to the same attribute within the physical test resulkt , sent at the end of test as a physcial file",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "operation",
            "in": "path",
            "description": "the serialnumber of the item",
            "required": true,
            "schema": {
              "type": "string",
              "example": "X2C"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "the serialnumber of the item",
            "required": true,
            "schema": {
              "type": "string",
              "example": "10986X201L"
            }
          },
          {
            "name": "partnumber",
            "in": "query",
            "description": "the part number of the items being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family",
            "in": "query",
            "description": "The family of product being placed into the location",
            "required": true,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "result",
            "in": "query",
            "description": "Result of the test suite being run. ",
            "required": true,
            "schema": {
              "type": "number",
              "enum": [
                "PASSED",
                "FAILED",
                "ABORTED"
              ]
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "post": {
        "description": "Post a unit is starting a test suite",
        "tags": [
          "testsuite"
        ],
        "parameters": [
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "the unique siteid that is hosting the device",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "location",
            "in": "path",
            "description": "Area on the floor where the humidity is coming from",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "guti",
            "in": "query",
            "description": "The global unique identifier which refers to the test being run. When tdms receives this full result file, this will correlate back to the real time event. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "testStartTime",
            "in": "query",
            "description": "Test start time which will correspond to the same attribute within the physical test resulkt , sent at the end of test as a physcial file",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "operation",
            "in": "path",
            "description": "location on the floor within the area the humidity is coming from",
            "required": true,
            "schema": {
              "type": "string",
              "example": "SFT"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "the uniqueid of the device , could be the serialnumber. The device reading the humidity",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family",
            "in": "query",
            "description": "The actual humidity reading",
            "required": true,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "partnumber",
            "in": "query",
            "description": "The actual humidity reading",
            "required": true,
            "schema": {
              "type": "number"
            }
          },
          {
            "name": "totalTestSteps",
            "in": "query",
            "description": "The actual humidity reading",
            "required": true,
            "schema": {
              "type": "number",
              "minimum": 1
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/teststep/{location}/{operation}/{teststepname}/{serialnumber}": {
      "delete": {
        "description": "Remove a unit from a test suite as it has completed the test suite",
        "tags": [
          "teststep"
        ],
        "parameters": [
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "The unique siteid that is required . ",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "location",
            "in": "path",
            "description": "The location on the shop floor where the system is being placed to under go a test operation",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "guti",
            "in": "query",
            "description": "The global unique identifier which refers to the test being run. When tdms receives this full result file, this will correlate back to the real time event. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "testStartTime",
            "in": "query",
            "description": "Test start time which will correspond to the same attribute within the physical test resulkt , sent at the end of test as a physcial file",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "operation",
            "in": "path",
            "description": "the serialnumber of the item",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "teststepname",
            "in": "path",
            "description": "the name of the teststep/testSet being executed",
            "required": true,
            "schema": {
              "type": "string",
              "example": "BOOT_DIAG_1"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "the serialnumber of the item",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "partnumber",
            "in": "query",
            "description": "the part number of the items being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family",
            "in": "query",
            "description": "The family of product being placed into the location",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "result",
            "in": "query",
            "description": "Result of the test step/set being run. ",
            "required": true,
            "schema": {
              "type": "number",
              "enum": [
                "PASSED",
                "FAILED",
                "ABORTED"
              ]
            }
          },
          {
            "name": "totalSteps",
            "in": "query",
            "description": "The number number of steps within the testsuite being executed",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "presentStep",
            "in": "query",
            "description": "the present step number , ",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "put": {
        "description": "Put a unit that is starting a test step within a testsuite",
        "tags": [
          "teststep"
        ],
        "parameters": [
          {
            "name": "x-tdms-siteid",
            "in": "header",
            "description": "the unique siteid that is hosting the device",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "location",
            "in": "path",
            "description": "the physcial location where this is occuring",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "operation",
            "in": "path",
            "description": "The operation being carried out",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "guti",
            "in": "query",
            "description": "The global unique identifier which refers to the test being run. When tdms receives this full result file, this will correlate back to the real time event. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "testStartTime",
            "in": "query",
            "description": "Test start time which will correspond to the same attribute within the physical test result , sent at the end of test as a physcial file",
            "required": true,
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2022-04-12T23:20:50.52Z"
            }
          },
          {
            "name": "teststepname",
            "in": "path",
            "description": "the teststep name that is being executed",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "serialnumber",
            "in": "path",
            "description": "serialnumber",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "family",
            "in": "query",
            "description": "The actual family of product ",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "partnumber",
            "in": "query",
            "description": "The partnumber ",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "totalSteps",
            "in": "query",
            "description": "The total number of steps that are contained within this testsuite",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "presentStep",
            "in": "query",
            "description": "the present step number , which will be numbered from 1",
            "required": true,
            "schema": {
              "type": "integer",
              "minimum": 1
            }
          },
          {
            "name": "x-tdms-applicationid",
            "in": "header",
            "description": "The identifier of the application invoking the rest call. ",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  }
}